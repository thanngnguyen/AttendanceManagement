@{
    ViewData["Title"] = "Báo Cáo Hệ Thống";
    Layout = "~/Views/Admin/_AdminLayout.cshtml";
}

<!-- Top Bar -->
<div class="admin-topbar">
    <div class="topbar-title">
        <h1>Báo Cáo Hệ Thống</h1>
        <small>Thống kê toàn bộ hệ thống</small>
    </div>
    <div class="topbar-actions">
        <a href="javascript:location.reload()" class="topbar-action-btn">
            <i class="fas fa-sync-alt"></i> Làm Mới
        </a>
    </div>
</div>

<!-- Statistics -->
<div class="row mb-4">
    <div class="col-md-3 mb-3">
        <div class="glass-card">
            <div class="glass-body">
                <div style="font-size: 24px; color: #667eea; margin-bottom: 10px;">
                    <i class="fas fa-users"></i>
                </div>
                <h6 class="text-glass-muted">Tổng Người Dùng</h6>
                <h2 class="text-white mb-2">@ViewBag.TotalUsers</h2>
                <small class="text-glass-muted">
                    GV: @ViewBag.TeacherCount | SV: @ViewBag.StudentCount
                </small>
            </div>
        </div>
    </div>

    <div class="col-md-3 mb-3">
        <div class="glass-card">
            <div class="glass-body">
                <div style="font-size: 24px; color: #48bb78; margin-bottom: 10px;">
                    <i class="fas fa-chalkboard"></i>
                </div>
                <h6 class="text-glass-muted">Lớp Học</h6>
                <h2 class="text-white mb-2">@ViewBag.TotalClasses</h2>
                <small class="text-glass-muted">
                    Hoạt Động: @ViewBag.ActiveClasses
                </small>
            </div>
        </div>
    </div>

    <div class="col-md-3 mb-3">
        <div class="glass-card">
            <div class="glass-body">
                <div style="font-size: 24px; color: #4299e1; margin-bottom: 10px;">
                    <i class="fas fa-clipboard-check"></i>
                </div>
                <h6 class="text-glass-muted">Điểm Danh</h6>
                <h2 class="text-white mb-2">@ViewBag.TotalAttendanceRecords</h2>
                <small class="text-glass-muted">
                    Vi Phạm: @ViewBag.FlaggedRecords
                </small>
            </div>
        </div>
    </div>

    <div class="col-md-3 mb-3">
        <div class="glass-card">
            <div class="glass-body">
                <div style="font-size: 24px; color: #ed8936; margin-bottom: 10px;">
                    <i class="fas fa-file-medical"></i>
                </div>
                <h6 class="text-glass-muted">Đơn Xin Nghỉ</h6>
                <h2 class="text-white mb-2">@(ViewBag.PendingLeaveRequests + ViewBag.ApprovedLeaveRequests)</h2>
                <small class="text-glass-muted">
                    Chờ: @ViewBag.PendingLeaveRequests | Duyệt: @ViewBag.ApprovedLeaveRequests
                </small>
            </div>
        </div>
    </div>
</div>

<!-- Detailed Reports -->
<div class="row">
    <!-- User Report -->
    <div class="col-lg-6 mb-4">
        <div class="glass-card">
            <div class="glass-header">
                <h5 class="mb-0">
                    <i class="fas fa-user-chart icon-glow"></i> Báo Cáo Người Dùng
                </h5>
            </div>
            <div class="glass-body">
                <div class="glass-box mb-3">
                    <div class="row">
                        <div class="col-8">
                            <strong>Tổng Người Dùng</strong>
                        </div>
                        <div class="col-4 text-end">
                            <h4 class="text-white mb-0">@ViewBag.TotalUsers</h4>
                        </div>
                    </div>
                </div>
                <div class="glass-box mb-3">
                    <div class="row">
                        <div class="col-8">
                            <strong>Giáo Viên</strong>
                        </div>
                        <div class="col-4 text-end">
                            <h4 class="text-white mb-0">@ViewBag.TeacherCount</h4>
                        </div>
                    </div>
                </div>
                <div class="glass-box">
                    <div class="row">
                        <div class="col-8">
                            <strong>Sinh Viên</strong>
                        </div>
                        <div class="col-4 text-end">
                            <h4 class="text-white mb-0">@ViewBag.StudentCount</h4>
                        </div>
                    </div>
                </div>
                <div class="text-center mt-4">
                    <a asp-action="Users" class="btn btn-gradient-primary btn-sm">
                        <i class="fas fa-eye"></i> Xem Chi Tiết
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Class Report -->
    <div class="col-lg-6 mb-4">
        <div class="glass-card">
            <div class="glass-header">
                <h5 class="mb-0">
                    <i class="fas fa-chalkboard-chart icon-glow"></i> Báo Cáo Lớp Học
                </h5>
            </div>
            <div class="glass-body">
                <div class="glass-box mb-3">
                    <div class="row">
                        <div class="col-8">
                            <strong>Tổng Lớp Học</strong>
                        </div>
                        <div class="col-4 text-end">
                            <h4 class="text-white mb-0">@ViewBag.TotalClasses</h4>
                        </div>
                    </div>
                </div>
                <div class="glass-box">
                    <div class="row">
                        <div class="col-8">
                            <strong>Lớp Hoạt Động</strong>
                        </div>
                        <div class="col-4 text-end">
                            <h4 class="text-white mb-0">@ViewBag.ActiveClasses</h4>
                        </div>
                    </div>
                </div>
                <div class="text-center mt-4">
                    <a asp-action="Classes" class="btn btn-gradient-success btn-sm">
                        <i class="fas fa-eye"></i> Xem Chi Tiết
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Attendance Report -->
    <div class="col-lg-6 mb-4">
        <div class="glass-card">
            <div class="glass-header">
                <h5 class="mb-0">
                    <i class="fas fa-attendance-chart icon-glow"></i> Báo Cáo Điểm Danh
                </h5>
            </div>
            <div class="glass-body">
                <div class="glass-box mb-3">
                    <div class="row">
                        <div class="col-8">
                            <strong>Tổng Bản Ghi</strong>
                        </div>
                        <div class="col-4 text-end">
                            <h4 class="text-white mb-0">@ViewBag.TotalAttendanceRecords</h4>
                        </div>
                    </div>
                </div>
                <div class="glass-box">
                    <div class="row">
                        <div class="col-8">
                            <strong>Vi Phạm Phát Hiện</strong>
                        </div>
                        <div class="col-4 text-end">
                            <h4 class="text-white mb-0">@ViewBag.FlaggedRecords</h4>
                        </div>
                    </div>
                </div>
                <div class="text-center mt-4">
                    <a asp-action="Attendance" class="btn btn-gradient-info btn-sm">
                        <i class="fas fa-eye"></i> Xem Chi Tiết
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Leave Request Report -->
    <div class="col-lg-6 mb-4">
        <div class="glass-card">
            <div class="glass-header">
                <h5 class="mb-0">
                    <i class="fas fa-leave-chart icon-glow"></i> Báo Cáo Đơn Xin Nghỉ
                </h5>
            </div>
            <div class="glass-body">
                <div class="glass-box mb-3">
                    <div class="row">
                        <div class="col-8">
                            <strong>Chờ Duyệt</strong>
                        </div>
                        <div class="col-4 text-end">
                            <h4 class="text-white mb-0">@ViewBag.PendingLeaveRequests</h4>
                        </div>
                    </div>
                </div>
                <div class="glass-box">
                    <div class="row">
                        <div class="col-8">
                            <strong>Đã Duyệt</strong>
                        </div>
                        <div class="col-4 text-end">
                            <h4 class="text-white mb-0">@ViewBag.ApprovedLeaveRequests</h4>
                        </div>
                    </div>
                </div>
                <div class="text-center mt-4">
                    <a asp-action="LeaveRequests" class="btn btn-gradient-warning btn-sm">
                        <i class="fas fa-eye"></i> Xem Chi Tiết
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
